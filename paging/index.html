<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>페이징 구현 TEST</title>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <style>
        table,tr,td,th {border:1px solid #666;border-collapse:collapse}a{padding:10px;background:#eee}.current {color:red;font-weight:bold}
    </style>
</head>
<body>
    <div id="paging" style="margin:20px 0 0 0;text-align:center">
        <a href="" class="firstPage">처음</a>
        <a href="" class="prevPage">이전</a>
        <a href="" class="current">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">0</a>
        <a href="">10</a>
        <a href="" class="nextPage">다음</a>
        <a href="" class="lastPage">마지막</a>
    </div>
    <table style="width:900px;margin:20px auto">
        <thead>
            <tr><th>TITLE</th><th>TITLE</th><th>TITLE</th><th>TITLE</th></tr>
        </thead>
        <tbody>
            <tr><td>number</td><td>content</td><td>content</td><td>content</td></tr>
            <tr><td>number</td><td>content</td><td>content</td><td>content</td></tr>
            <tr><td>number</td><td>content</td><td>content</td><td>content</td></tr>
            <tr><td>number</td><td>content</td><td>content</td><td>content</td></tr>
            <tr><td>number</td><td>content</td><td>content</td><td>content</td></tr>
        </tbody>
    </table>
    <script>
        function ottoriPagination(){
            this.paging = function(obj){
                //개발자가 실수로 현재 페이지 옵션값을 넘기지 않고 호출했을 경우
                if(!obj.id){
                    alert("id 지정 필")
                };
                if(!obj.page){
                    alert("page 지정은 필수임")
                };
                if(!obj.row){
                    alert("리스트 몇 개 뿌려줄 건지 정하슈")
                };

                var pageBox = $("#"+obj.id)
                    , firstPage = $(".firstPage", pageBox)
                    , prevPage = $(".prevPage", pageBox)
                    , nextPage = $(".nextPage", pageBox)
                    , lastPage = $(".lastPage", pageBox)

                var linkNumber = $("a", pageBox)
                    , link = obj.link
                    , totalCount = obj.totalCount
                    , row = obj.row
                    , pageGroup = obj.pageGroup
                    , pageListNum = totalCount/row
                    , currentPage = obj.currentPage

                var that = this;
                that.pageList = new Array();
                that.arr = new Array();

                //숫자링크 생성
                var linkElement = linkNumber.get(3)

                //현재 페이지리스트로 뿌려줄 넘버 뽑아내기
                function thisPageArray(){
                    var startNumber = 0;
                    var tempNum = currentPage.toString();
                    var arr = $.makeArray(currentPage)

                    //var numArray = $.makeArray(currentPage)

                    if(currentPage < 11){
                        startNumber = 1;
                    }else if(currentPage > 10 && currentPage < 101){
                        startNumber = parseInt(tempNum.slice(0,1) + 0);
                        console.log(startNumber)
                    }else if(currentPage > 100 && currentPage < 1001){
                        //일단 보류.
                    }else if(currentPage > 1000 && currentPage < 10001){
                        //일단 보류.
                    }else{
                        //일단 보류.
                    };

                    for(var i=1;i<=pageGroup;i++){
                        that.pageList.push( startNumber + i )
                    }
                };
                thisPageArray();

console.log(that.pageList)
                //페이지 리스트 링크 삭제
                for(var i=2;i<=pageGroup+1;i++){
                    linkNumber[i].remove();
                }
                //페이지 리스트 링크 새로 생성
                //var pageLinkElement = ' <a href="#"></a> '
                var pageLinkElement = document.createElement("a");
                var pageLinkElementArray = " <a href='#'></a> "
                console.log(pageLinkElement)

                for(var i=0, lengths=that.pageList.length; i<lengths;i++){
                    pageLinkElementArray += " <a href='#'></a> "
//                    linkNumber[i+2].innerHTML = that.pageList[i]

                    // pageLinkElement.innerHTML = that.pageList[i]
                    // var pageLinkElement = document.createElement("a").innerHTML = that.pageList[i]
                    // console.log(pageLinkElement)
                    // nextPage.before(pageLinkElement)
                }
                console.log(pageLinkElementArray[0])
                nextPage.before(pageLinkElementArray);
                setTimeout(function(){
                    for(var i=0, lengths=that.pageList.length; i<lengths;i++){
                        linkNumber[i+2].innerHTML = that.pageList[i];
                        console.log(i)
                    }
                },500)




                //total 건수에 row를 나눈값이 총 페이지리스트 갯수가 되며 다음을 클릭할 때마다 해당 순서에 해당하는 페이지리스트를 뿌려줌
                // for(var i=1; i<pageListNum+1; i++){
                //     if(i % row == 0){
                //         pageList.push(arr);
                //     }else{
                //         arr.push(i);
                //     }
                //     console.log(pageList, arr)
                // }

                //a 요소 안에 숫자 세팅
                var order = linkNumber.index() < 2 || linkNumber.index() > 11
                var writingNumber = totalCount/pageGroup
                var pageArray = [];

                pageArray.innerHTML = writingNumber;

                for(var i = 2; i < pageGroup + 2 ; i++){
                    linkNumber.eq(i).text(i-1);
                }

                //클릭시 해당 링크 볼드 표시
                linkNumber.click(function(e){
                    if($(this).index() < 2 || $(this).index() > 11){

                    }else{
                        if($(this).index() == obj.page){

                        }else{
                            linkNumber.removeClass()
                            $(this).addClass("current");
                        };
                    };
                    e.preventDefault();
                });
            }
        };

        var Opage = new ottoriPagination();

        Opage.paging({
            id : "paging",
            page : 2,
            row : 5,
            totalCount : 2000,
            pageGroup : 10,
            currentPage : 20
        })


        // function id(id){return document.getElementById(id)}
        // var paging = id("paging");
        // var linkNumber = paging.getElementsByTagName("a");

        // var link = {};
        // var totalCount = 2000;
        // var rows = 5;
        // var totalPage = totalCount/rows
        // var pageGroup = 10;
        // var currentPage = 2;

//         function pagination(page){
//             this.paging = function(obj){
//                 for( var i =0, length = linkNumber.length; i < length; i++){
//                     linkNumber[i].click = function(){
//                         if( i < 2 || i > 9){
// console.log("click")
//                         }else{
//                             if(this.index == obj.page){

//                             }else{

//                                 this.className = "current";
//                             };
//                             return false;
//                         }
//                     }
//                 };
//             }
//         };

//        var Opage = new pagination();





    </script>

</body>
</html>

