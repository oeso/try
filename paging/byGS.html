<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>페이징 구현 TEST</title>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <script src="https://use.fontawesome.com/45471160d8.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <style>li{display:inline-block}
        table,tr,td,th {border:1px solid #666;border-collapse:collapse}a,strong{padding:10px;background:#eee}.current {color:red;font-weight:bold}
    </style>
</head>
<body>
    <ul id="paging" class="pagination" style="margin:20px 0 0 0;text-align:center">
        <li><i><a href="" class="first">처음</a></i></li>
        <li><i><a href="" class="prev">이전</a></i></li>
        <li><i><a class="current">0</a></i></li>
        <li><i><a href="">0</a></i></li>
        <li><i><a href="" class="next">다음</a></i></li>
        <li><i><a href="" class="last">마지막</a></i></li>
    </ul>
    <div style="width:900px;margin:20px auto;padding:10px;background:#eee">
        <table style="width:100%;text-align:center"><colgroup><col style="width:70px"/><col/><col/><col/></colgroup>
            <thead>
                <tr><th>TITLE</th><th>TITLE</th><th>TITLE</th><th>TITLE</th></tr>
            </thead>
            <tbody>
                <tr><td>No.</td><td>content</td><td>content</td><td>content</td></tr><tr><td>No.</td><td>container</td><td>content</td><td>content</td></tr>
                <tr><td>No.</td><td>content</td><td>content</td><td>content</td></tr><tr><td>No.</td><td>container</td><td>content</td><td>content</td></tr>
                <tr><td>No.</td><td>content</td><td>content</td><td>content</td></tr><tr><td>No.</td><td>container</td><td>content</td><td>content</td></tr>
                <tr><td>No.</td><td>content</td><td>content</td><td>content</td></tr><tr><td>No.</td><td>container</td><td>content</td><td>content</td></tr>
                <tr><td>No.</td><td>content</td><td>content</td><td>content</td></tr><tr><td>No.</td><td>container</td><td>content</td><td>content</td></tr>
            </tbody>
        </table>
    </div>
    <script>
        pagination({
            totalPages : 999999,
            pageNumber : 4646,
            paginationSize : 10
        })
        //pagination
        //var paginationSize = 10;
        function pagination(data) {
            var page = [];
            var totalPages = data.totalPages;
            var currPageNumber = data.pageNumber;
            var pageBlockNumber = parseInt((currPageNumber -1) / data.paginationSize) + 1; // 24/10  +1  = 3
            var startPageNumber = (pageBlockNumber * data.paginationSize) - (data.paginationSize - 1); // 3 * 10   -   9 = 21
            var endPageNumber = (pageBlockNumber * data.paginationSize); //3 * 10 = 30

            if (pageBlockNumber !== 1) {  //first page block: none
                page.push('<li class="arrow"><a href="#" title="맨 처음" class="first"><i class="fa fa-angle-left"></i></a></li>');
                page.push('<li class="arrow"><a href="#" title="이전 10페이지" class="prev"><i class="fa fa-angle-double-left"></i></a></li>');
            }
            for (var i=startPageNumber; i <= endPageNumber; i++) {
                if (i <= totalPages) {
                    if (i == currPageNumber) {
                        page.push('<li class="current"><a href="#page=');
                        page.push(i);
                        page.push('">');
                        page.push(i);
                        page.push('</a></li>');
                    }else {
                        page.push('<li><a href="#page=');
                        page.push(i);
                        page.push('">');
                        page.push(i);
                        page.push('</a></li>');
                    }
                    }else{
                    break;
                }
            }
            if (pageBlockNumber !== parseInt((totalPages-1) / data.paginationSize) +1) {  //last page block
                page.push('<li class="arrow"><a href="#" title="다음 10페이지" class="next"><i class="fa fa-angle-double-right"></i></a></li>');
                page.push('<li class="arrow"><a href="#" title="맨 끝" class="last"><i class="fa fa-angle-right"></i></a></li>');
            }
            $('.pagination').html(page.join(''));

            $('.pagination a').click(function(){
                _$paginationLink = $(this);
                if (_$paginationLink.hasClass('first')) {
                    queryStringUtils.changePage(1, dataUrl);
                }else if (_$paginationLink.hasClass('prev')) {
                    queryStringUtils.changePage(startPageNumber - data.paginationSize, dataUrl);
                }else if (_$paginationLink.hasClass('next')) {
                    queryStringUtils.changePage(startPageNumber + data.paginationSize, dataUrl);
                }else if (_$paginationLink.hasClass('last')) {
                    queryStringUtils.changePage(totalPages, dataUrl);
                }else {
                var pageNum = _$paginationLink.text();
                    queryStringUtils.changePage(pageNum, dataUrl);
                }
                return false;
            });
        }


        //위 코드에서 특히 아래
        // $('.pagination a').click(function(){
        //     _$paginationLink = $(this);
        //     if (_$paginationLink.hasClass('first')) {
        //       queryStringUtils.changePage(1, dataUrl);
        //     }else if (_$paginationLink.hasClass('prev')) {
        //       queryStringUtils.changePage(startPageNumber - data.paginationSize, dataUrl);
        //     }else if (_$paginationLink.hasClass('next')) {
        //       queryStringUtils.changePage(startPageNumber + data.paginationSize, dataUrl);
        //     }else if (_$paginationLink.hasClass('last')) {
        //       queryStringUtils.changePage(totalPages, dataUrl);
        //     }else {
        //       var pageNum = _$paginationLink.text();
        //       queryStringUtils.changePage(pageNum, dataUrl);
        //     }
        //     return false;
        //   });
        // 이부분에선
        // queryStringUtils.changePage(1, dataUrl);1  에 해당하는 부분만
        // 해당 링크일때 공식으로 생각하면 됨

    </script>

</body>
</html>

